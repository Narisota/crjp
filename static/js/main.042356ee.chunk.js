(this["webpackJsonpproducts-api-ui"]=this["webpackJsonpproducts-api-ui"]||[]).push([[0],{114:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var c,a,r,s,i,o,d,l,u,j,b,m,p,h,O,x,g,v=n(91),f=n.n(v),N=n(8),k=n.n(N),w=n(15),y=n(7),_=n(3),C="",F=function(e){C=e},S=function(){return C},$=n(27),P=n(103),A=n(14),q=n(56),E=n(1),I=function(){var e=S();if(!e)return!1;try{var t=Object(q.a)(e).exp;return!(Date.now()>=1e3*t)}catch(n){return!1}},T=function(e){var t=e.component,n=Object(P.a)(e,["component"]);return Object(E.jsx)(A.b,Object($.a)(Object($.a)({},n),{},{render:function(e){return I()?Object(E.jsx)(t,Object($.a)({},e)):Object(E.jsx)(A.a,{to:"/dashboard"})}}))},L=(n(114),function(){return Object(E.jsx)("div",{children:Object(E.jsx)("nav",{className:"white z-depth-0",style:{borderBottom:"1px solid #dfe0e6"},children:Object(E.jsx)("div",{className:"nav-wrapper",children:Object(E.jsx)("div",{className:"row",style:{display:"flex",justifyContent:"center"},children:Object(E.jsxs)("ul",{id:"nav-mobile",className:"center ",children:[Object(E.jsx)("li",{children:Object(E.jsx)("a",{className:"black-text",href:"#/orders",children:"Orders"})}),Object(E.jsx)("li",{children:Object(E.jsx)("a",{className:"black-text",href:"#/products",children:"Products"})}),Object(E.jsx)("li",{children:Object(E.jsx)("a",{className:"black-text",href:"#/coupons",children:"Coupons"})}),Object(E.jsx)("li",{children:Object(E.jsx)("a",{className:"black-text",href:"#/announcements",children:"Announcements"})}),Object(E.jsx)("li",{children:Object(E.jsx)("a",{className:"black-text",href:"#/maintenance",children:"Maintenance"})})]})})})})})}),B=function(e){var t=e.children;return Object(E.jsxs)("div",{className:"pageWrapper",children:[Object(E.jsx)(L,{}),t||Object(E.jsx)(E.Fragment,{})]})},D=n(21),z=n(6),R=Object(z.gql)(c||(c=Object(D.a)(["\n    mutation addAnnouncement($text: String!) {\n  addAnnouncement(text: $text)\n}\n    "])));var Q=Object(z.gql)(a||(a=Object(D.a)(["\n    mutation addCoupon($coupon_name: String!, $discount: String!) {\n  addCoupon(coupon_name: $coupon_name, discount: $discount)\n}\n    "])));var H=Object(z.gql)(r||(r=Object(D.a)(["\n    mutation addImgToProduct($img_url: String!, $product_id: Float!) {\n  addImgToProduct(img_url: $img_url, product_id: $product_id)\n}\n    "])));var W=Object(z.gql)(s||(s=Object(D.a)(["\n    mutation addProduct($name: String!, $desc: String!, $price: Float!, $stock: Float!) {\n  addProduct(name: $name, desc: $desc, price: $price, stock: $stock)\n}\n    "])));var J=Object(z.gql)(i||(i=Object(D.a)(["\n    mutation apiLogin($username: String!, $password: String!) {\n  apiLogin(username: $username, password: $password) {\n    accessToken\n    refreshToken\n  }\n}\n    "])));var X=Object(z.gql)(o||(o=Object(D.a)(["\n    mutation deleteAnnouncement($id: String!) {\n  deleteAnnouncement(id: $id)\n}\n    "])));var G=Object(z.gql)(d||(d=Object(D.a)(["\n    mutation deleteCoupon($coupon_name: String!) {\n  deleteCoupon(coupon_name: $coupon_name)\n}\n    "])));var U=Object(z.gql)(l||(l=Object(D.a)(["\n    mutation deleteProduct($product_id: Float!) {\n  deleteProduct(product_id: $product_id)\n}\n    "])));var V=Object(z.gql)(u||(u=Object(D.a)(["\n    mutation editTracking($new_tracking_num: String!, $order_id: Float!) {\n  editTracking(new_tracking_num: $new_tracking_num, order_id: $order_id)\n}\n    "])));var Y=Object(z.gql)(j||(j=Object(D.a)(["\n    query getAnnouncements {\n  getAnnouncements {\n    id\n    text\n  }\n}\n    "])));var K=Object(z.gql)(b||(b=Object(D.a)(["\n    query getCoupons {\n  getCoupons {\n    coupon_name\n    coupon_id\n    discount\n  }\n}\n    "])));var Z=Object(z.gql)(m||(m=Object(D.a)(["\n    query getMaintenance {\n  getMaintenance\n}\n    "])));var ee=Object(z.gql)(p||(p=Object(D.a)(["\n    query getOrders {\n  getOrders {\n    products {\n      product_id\n      name\n      desc\n      price\n      stock\n      exp_date\n      quantityOrdered\n      productSubtotal\n      images {\n        img_id\n        img_url\n        index\n      }\n    }\n    order_id\n    tracking_num\n    order_total\n    coupon\n    discount\n    shipping\n    warning\n  }\n}\n    "])));var te=Object(z.gql)(h||(h=Object(D.a)(["\n    query getProduct($product_id: Float!) {\n  getProduct(product_id: $product_id) {\n    product_id\n    name\n    desc\n    price\n    stock\n    exp_date\n    images {\n      img_id\n      img_url\n    }\n  }\n}\n    "])));var ne=Object(z.gql)(O||(O=Object(D.a)(["\n    query getProducts {\n  getProducts {\n    product_id\n    name\n    desc\n    price\n    stock\n    exp_date\n    images {\n      img_id\n      img_url\n    }\n  }\n}\n    "])));var ce=Object(z.gql)(x||(x=Object(D.a)(["\n    mutation toggleMaintenance {\n  toggleMaintenance\n}\n    "])));var ae=Object(z.gql)(g||(g=Object(D.a)(["\n    mutation updateProduct($product_id: Float!, $name: String!, $desc: String!, $price: Float!, $stock: Float!) {\n  updateProduct(\n    product_id: $product_id\n    name: $name\n    desc: $desc\n    price: $price\n    stock: $stock\n  )\n}\n    "])));var re=n(61),se=n(60),ie=n.n(se),oe=function(){var e,t=z.useMutation(W,e),n=Object(y.a)(t,1)[0],c=function(e){return z.useMutation(H,e)}(),a=Object(y.a)(c,1)[0],r=Object(_.useState)(""),s=Object(y.a)(r,2),i=s[0],o=s[1],d=Object(_.useState)(""),l=Object(y.a)(d,2),u=l[0],j=l[1],b=Object(_.useState)(""),m=Object(y.a)(b,2),p=m[0],h=m[1],O=Object(_.useState)(""),x=Object(y.a)(O,2),g=x[0],v=x[1],f=Object(_.useState)([]),N=Object(y.a)(f,2),C=N[0],F=N[1],S=Object(_.useState)(!1),P=Object(y.a)(S,2),q=P[0],I=P[1],T=Object(_.useState)(!1),L=Object(y.a)(T,2),B=L[0],D=L[1],R=function(){var e=Object(w.a)(k.a.mark((function e(){var t,c,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){var e;null===(e=document.getElementById("submit-btn"))||void 0===e||e.classList.remove("disabled")},i&&u&&p&&g){e.next=5;break}de(i,u,p,g),e.next=22;break;case 5:return e.prev=5,e.next=8,n({variables:{name:i,desc:u,price:Number(p),stock:Number(g)}});case 8:c=e.sent,r=0;case 10:if(!(r<C.length)){e.next=16;break}return e.next=13,a({variables:{img_url:C[r],product_id:Number(c.data.addProduct)}});case 13:r++,e.next=10;break;case 16:D(!0),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),M.toast({html:"Could not add product"});case 22:t();case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,c,a,r,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=18;break}return(c=new FormData).append("api_key","247981962584482"),c.append("file",t[n]),c.append("tags","codeinfuse, medium, gist"),c.append("upload_preset","re5zmdqn"),a=Date.now()/1e3|0,c.append("timestamp","".concat(a)),e.next=11,ie.a.post("https://api.cloudinary.com/v1_1/desimqzzy/image/upload",c,{headers:{"X-Requested-With":"XMLHttpRequest"}});case 11:r=e.sent,(s=C).push(r.data.secure_url),F(s);case 15:n++,e.next=1;break;case 18:I(!q);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return B?Object(E.jsx)(A.a,{to:{pathname:"/products",state:{reload:!0}}}):Object(E.jsxs)("div",{className:"container",style:{width:"50%"},children:[Object(E.jsx)("div",{className:"row",children:Object(E.jsx)("h5",{children:"Add A Product"})}),Object(E.jsxs)("form",{children:[Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"name",type:"text",value:i,onChange:function(e){return o(e.target.value)}}),Object(E.jsx)("label",{htmlFor:"name",children:"Name"}),Object(E.jsx)("span",{className:"helper-text","data-error":"Please enter a product name"})]})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("textarea",{id:"desc",value:u,className:"materialize-textarea",onChange:function(e){return j(e.target.value)}}),Object(E.jsx)("label",{htmlFor:"desc",children:"Description"}),Object(E.jsx)("span",{className:"helper-text","data-error":"Please enter a product description"})]})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"price",type:"text",value:p,onChange:function(e){e.target.value||h(e.target.value),e.target.value.match(/\d/g)&&h(e.target.value)}}),Object(E.jsx)("label",{htmlFor:"price",children:"Price"}),Object(E.jsx)("span",{className:"helper-text","data-error":"Please enter a product price"})]})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"stock",type:"text",value:g,onChange:function(e){e.target.value||v(e.target.value),e.target.value.match(/\d/g)&&v(e.target.value)}}),Object(E.jsx)("label",{htmlFor:"stock",children:"Stock"}),Object(E.jsx)("span",{className:"helper-text","data-error":"Please enter a stock amount"})]})}),Object(E.jsx)("div",{className:"container",children:Object(E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(E.jsx)("button",{id:"submit-btn",className:"btn green",onClick:function(){document.getElementById("submit-btn").classList.add("disabled"),R()},children:"Submit"}),Object(E.jsx)(re.a,{onDrop:function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object(E.jsxs)("div",Object($.a)(Object($.a)({},t()),{},{children:[Object(E.jsx)("input",Object($.a)({},n())),Object(E.jsx)("button",{className:"btn black",children:"Add Images"})]}))}})]})})]}),0===C.length?Object(E.jsx)(E.Fragment,{}):Object(E.jsx)(E.Fragment,{children:C.map((function(e,t){return console.log("test"),Object(E.jsx)("img",{src:C[t]})}))})]})},de=function(e,t,n,c){document.getElementById("name").classList.remove("invalid"),document.getElementById("desc").classList.remove("invalid"),document.getElementById("price").classList.remove("invalid"),document.getElementById("stock").classList.remove("invalid"),e||document.getElementById("name").classList.add("invalid"),t||document.getElementById("desc").classList.add("invalid"),n||document.getElementById("price").classList.add("invalid"),c||document.getElementById("stock").classList.add("invalid")},le=n(16),ue=n.n(le),je=function(){var e,t=z.useQuery(Y,e),n=t.data,c=t.loading,a=t.error,r=function(e){return z.useMutation(R,e)}(),s=Object(y.a)(r,1)[0],i=function(e){return z.useMutation(X,e)}(),o=Object(y.a)(i,1)[0],d=Object(_.useState)(!1),l=Object(y.a)(d,2),u=l[0],j=l[1],b=Object(_.useState)(""),m=Object(y.a)(b,2),p=m[0],h=m[1];if(Object(_.useEffect)((function(){ue.a.AutoInit()})),c)return Object(E.jsx)(E.Fragment,{children:"...loading"});if(!n||a)return console.log("error :>> ",a),ue.a.toast({html:"".concat(a)}),Object(E.jsx)("div",{className:"centered",children:Object(E.jsx)("h1",{className:"red-text",children:"An Error has occurred"})});var O=n.getAnnouncements;return Object(E.jsxs)("div",{className:"container",children:[Object(E.jsx)("h1",{className:"center-align",children:"Announcements"}),0===O.length?Object(E.jsx)("h4",{className:"center-align",children:"NONE"}):Object(E.jsx)(E.Fragment,{children:O.map((function(e,t){return Object(E.jsxs)("div",{className:"container",style:{display:"flex",justifyContent:"space-between"},children:[Object(E.jsx)("h4",{className:"center-align",children:O[t].text}),Object(E.jsx)("i",{className:"material-icons red-text",onClick:Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({variables:{id:O[t].id}});case 3:window.location.reload(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),ue.a.toast({html:"An error occured"}),ue.a.toast({html:"Could not add Announcement"});case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),children:"delete"})]})}))}),Object(E.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object(E.jsx)("button",{className:"btn black",onClick:function(){j(!0)},children:"Add an Announcement"})}),u?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"text_1",className:"validate",type:"text",value:p,onChange:function(e){return h(e.target.value)}}),Object(E.jsx)("label",{htmlFor:"text_1",children:"Announcement Text"})]}),Object(E.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object(E.jsx)("button",{className:"btn green",onClick:Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=11;break}return e.prev=1,e.next=4,s({variables:{text:p}});case 4:window.location.reload(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),ue.a.toast({html:"An error occured"}),ue.a.toast({html:"Could not add Announcement"});case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),children:"Confirm"})})]}):Object(E.jsx)(E.Fragment,{})]})},be=function(){var e,t=z.useQuery(K,e),n=t.data,c=t.loading,a=t.error,r=function(e){return z.useMutation(Q,e)}(),s=Object(y.a)(r,1)[0],i=function(e){return z.useMutation(G,e)}(),o=Object(y.a)(i,1)[0],d=Object(_.useState)(""),l=Object(y.a)(d,2),u=l[0],j=l[1],b=Object(_.useState)(""),m=Object(y.a)(b,2),p=m[0],h=m[1],O=Object(_.useState)(!1),x=Object(y.a)(O,2),g=x[0],v=x[1],f=Object(_.useState)(!1),N=Object(y.a)(f,2),C=N[0],F=N[1];return Object(_.useEffect)((function(){var e=document.querySelectorAll(".modal");ue.a.Modal.init(e),e=document.querySelectorAll(".dropdown-trigger"),ue.a.Dropdown.init(e),ue.a.AutoInit()})),c?Object(E.jsx)(E.Fragment,{children:"...loading"}):!n||a?(console.log("error :>> ",a),ue.a.toast({html:"".concat(a)}),Object(E.jsx)("div",{className:"centered",children:Object(E.jsx)("h1",{className:"red-text",children:"An Error has occurred"})})):Object(E.jsxs)("div",{className:"container",children:[Object(E.jsx)("h1",{className:"center-align",children:"Active Coupons"}),0===(null===n||void 0===n?void 0:n.getCoupons.length)?Object(E.jsx)("h4",{className:"center-align",children:"NONE"}):Object(E.jsx)(E.Fragment,{children:null===n||void 0===n?void 0:n.getCoupons.map((function(e,t){return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"container",style:{display:"flex",justifyContent:"space-between"},children:[Object(E.jsx)("h4",{className:"center-align",children:n.getCoupons[t].coupon_name}),Object(E.jsxs)("h5",{className:"center-align",children:["-",n.getCoupons[t].discount?n.getCoupons[t].discount:0,"%"]}),Object(E.jsx)("i",{className:"material-icons red-text",onClick:Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:{coupon_name:n.getCoupons[t].coupon_name}});case 2:e.sent.data.deleteCoupon?window.location.reload():(ue.a.toast({html:"An error occured"}),ue.a.toast({html:"Could not delete coupon"}));case 4:case"end":return e.stop()}}),e)}))),children:"delete"})]})})}))}),Object(E.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object(E.jsx)("button",{className:"btn black",onClick:function(){v(!0)},children:"Add a coupon"})}),g?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",marginTop:"24px"},children:Object(E.jsx)("a",{className:"dropdown-trigger btn black",href:"#","data-target":"dropdown1",children:C?Object(E.jsx)(E.Fragment,{children:"Coupon Type: Free Shipping"}):Object(E.jsx)(E.Fragment,{children:"Coupon Type: Discount"})})}),Object(E.jsxs)("ul",{id:"dropdown1",className:"dropdown-content",children:[Object(E.jsx)("li",{onClick:function(){F(!1)},children:"discount"}),Object(E.jsx)("li",{onClick:function(){F(!0),h("FREE_SHIPPING")},children:"free shipping"})]}),Object(E.jsxs)("div",{className:"row",style:{marginTop:"32px"},children:[Object(E.jsx)("div",{className:"col s6",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"coupon_name",type:"text",className:"validate",value:u,onChange:function(e){return j(e.target.value.toLowerCase())}}),Object(E.jsx)("label",{htmlFor:"coupon_name",children:"Coupon Name"}),Object(E.jsx)("span",{className:"helper-text","data-error":"Please enter a coupon name"})]})}),Object(E.jsx)("div",{className:"col s6",children:C?Object(E.jsx)(E.Fragment,{}):Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"discount",type:"text",className:"validate",minLength:0,maxLength:2,value:p,onChange:function(e){e.target.value||h("0"),e.target.value.match(/\d/g)&&h(e.target.value)}}),Object(E.jsx)("label",{htmlFor:"discount",children:"Discount(Percentage in Numbers)"}),Object(E.jsx)("span",{className:"helper-text","data-error":"Please enter a discount amount"})]})})]}),Object(E.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object(E.jsx)("button",{className:"btn green center-align",onClick:Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("discount.length :>> ",p.length),0!==u.length&&0!==p.length){e.next=6;break}0===u.length&&document.getElementById("coupon_name").classList.add("invalid"),C||0!==p.length||document.getElementById("discount").classList.add("invalid"),e.next=18;break;case 6:if(C){e.next=13;break}return e.next=9,s({variables:{coupon_name:u,discount:p}});case 9:e.sent.data.addCoupon?window.location.reload():(ue.a.toast({html:"An error occured"}),ue.a.toast({html:"Could not add coupon"})),e.next=18;break;case 13:return e.next=15,s({variables:{coupon_name:u,discount:"FREE_SHIPPING"}});case 15:t=e.sent,console.log("tmp :>> ",t),t.data.addCoupon?window.location.reload():(ue.a.toast({html:"An error occured"}),ue.a.toast({html:"Could not add coupon"}));case 18:case"end":return e.stop()}}),e)}))),children:"confirm"})})]}):Object(E.jsx)(E.Fragment,{})]})},me=function(){return Number(window.location.href.split(":")[2])},pe=function(){var e,t=me(),n=(e={variables:{product_id:t}},z.useQuery(te,e)),c=n.data,a=n.loading,r=n.error,s=function(e){return z.useMutation(ae,e)}(),i=Object(y.a)(s,1)[0],o=function(e){return z.useMutation(U,e)}(),d=Object(y.a)(o,1)[0],l=Object(_.useState)(""),u=Object(y.a)(l,2),j=u[0],b=u[1],m=Object(_.useState)(""),p=Object(y.a)(m,2),h=p[0],O=p[1],x=Object(_.useState)(""),g=Object(y.a)(x,2),v=g[0],f=g[1],N=Object(_.useState)(""),C=Object(y.a)(N,2),F=C[0],S=C[1],P=[""];if(Object(_.useEffect)((function(){var e=document.querySelectorAll(".modal");M.Modal.init(e)})),a)return Object(E.jsx)(E.Fragment,{children:"...loading"});if(r)return Object(E.jsx)(A.a,{to:"#/products"});var q=function(){var e=Object(w.a)(k.a.mark((function e(){var n,c,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j,c=h,a=Number(v),r=Number(F),j||(n=I.name),h||(c=I.desc),v||(a=I.price),F||(r=I.stock),e.next=7,i({variables:{product_id:t,name:n,desc:c,price:a,stock:r}});case 7:return e.abrupt("return",Object(E.jsx)(A.a,{to:"#/products"}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=c.getProduct;return Object(E.jsxs)("div",{className:"container",style:{width:"50%"},children:[Object(E.jsx)("div",{className:"row",children:Object(E.jsx)("h5",{children:"Edit Product"})}),Object(E.jsxs)("form",{children:[Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"name",type:"text",value:j,onChange:function(e){b(e.target.value)}}),Object(E.jsx)("label",{id:"name-label",htmlFor:"name",children:I.name})]})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("textarea",{id:"desc",value:h,className:"materialize-textarea",onChange:function(e){return O(e.target.value)}}),Object(E.jsx)("label",{htmlFor:"desc",children:I.desc})]})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"price",type:"text",value:v,onChange:function(e){return f(e.target.value)}}),Object(E.jsxs)("label",{htmlFor:"price",children:["$",Number(I.price/100)]})]})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"stock",type:"text",value:F,onChange:function(e){return S(e.target.value)}}),Object(E.jsx)("label",{htmlFor:"stock",children:I.stock})]})}),Object(E.jsx)("button",{className:"btn green",onClick:function(){return q()},children:"Submit"}),Object(E.jsx)("a",{className:"btn modal-trigger red right",href:"#modal1",children:"Delete"}),Object(E.jsx)(re.a,{onDrop:function(){var e=Object(w.a)(k.a.mark((function e(t){var n,c,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(y.a)(t,1),c=n[0],(a=new FormData).append("api_key","247981962584482"),a.append("file",c),a.append("tags","codeinfuse, medium, gist"),a.append("upload_preset","re5zmdqn"),r=Date.now()/1e3|0,a.append("timestamp","".concat(r)),ie.a.post("https://api.cloudinary.com/v1_1/cantrelate-jp/image/upload",a,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){P.push(e.data.secure_url)})).catch((function(e){M.toast({html:"An Error occured, please try again later."}),console.log("error",e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object(E.jsxs)("div",Object($.a)(Object($.a)({},t()),{},{children:[Object(E.jsx)("input",Object($.a)({},n())),"Click me to add a photo"]}))}})]}),Object(E.jsxs)("div",{id:"modal1",className:"modal",children:[Object(E.jsxs)("div",{className:"modal-content",children:[Object(E.jsx)("h4",{children:"Are you sure you want to delete this product?"}),Object(E.jsx)("p",{children:"This will also delete all of the users orders."})]}),Object(E.jsx)("div",{className:"modal-footer",children:Object(E.jsx)("button",{id:"delete-button",className:"btn right red",onClick:Object(w.a)(k.a.mark((function e(){var n,c,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=document.getElementById("delete-button"))||void 0===n||n.classList.add("disabled"),e.next=3,d({variables:{product_id:t}});case 3:a=e.sent,(null===(c=a.data)||void 0===c?void 0:c.deleteProduct)?window.location.reload():(M.toast({html:"Could not delete product"}),null===(r=document.getElementById("delete-button"))||void 0===r||r.classList.remove("disabled"));case 5:case"end":return e.stop()}}),e)}))),children:"Delete Product"})})]})]})},he=function(){var e,t=z.useQuery(Z,e),n=t.data,c=t.loading,a=t.error,r=function(e){return z.useMutation(ce,e)}(),s=Object(y.a)(r,1)[0];return c?Object(E.jsx)(E.Fragment,{children:"...loading"}):!n||a?Object(E.jsx)("div",{className:"container",children:Object(E.jsx)("h5",{children:"Maintenance: ERR"})}):Object(E.jsx)("div",{className:"container",children:Object(E.jsx)("div",{className:"centered",style:{marginTop:"32px"},children:Object(E.jsx)("h4",{children:Object(E.jsxs)("span",{className:"switch",children:["Maintenance:"," ",n.getMaintenance?Object(E.jsxs)("label",{children:["Off",Object(E.jsx)("input",{type:"checkbox",checked:!0}),Object(E.jsx)("span",{className:"lever",onClick:Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))}),"On"]}):Object(E.jsxs)("label",{children:["Off",Object(E.jsx)("input",{type:"checkbox"}),Object(E.jsx)("span",{className:"lever",onClick:Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))}),"On"]})]})})})})},Oe=function(){return Object(E.jsx)("div",{children:"Coming Soon"})},xe=function(){var e,t=z.useQuery(ee,e),n=t.data,c=t.loading,a=t.error,r=function(e){return z.useMutation(V,e)}(),s=Object(y.a)(r,1)[0],i=Object(_.useState)({tracking:[]}),o=Object(y.a)(i,2),d=o[0],l=o[1];return c?Object(E.jsx)(E.Fragment,{children:"...loading"}):!n||a?(console.log("error :>> ",a),M.toast({html:"".concat(a)}),Object(E.jsx)("div",{className:"centered",children:Object(E.jsx)("h1",{className:"red-text",children:"An Error has occurred"})})):(console.log("data :>> ",n),n.getOrders.reverse(),console.log("JSON.stringify(data.) :>> ",JSON.parse(n.getOrders[7].shipping)),Object(E.jsx)("div",{className:"container",children:Object(E.jsxs)("table",{children:[Object(E.jsx)("thead",{children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{children:"Order ID"}),Object(E.jsx)("th",{children:"Tracking Number"}),Object(E.jsx)("th",{children:"Products Ordered"}),Object(E.jsx)("th",{children:"Order Total"})]})}),Object(E.jsx)("tbody",{children:n.getOrders.map((function(e,t){var c=null===n||void 0===n?void 0:n.getOrders[t];return Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:null===c||void 0===c?void 0:c.order_id}),Object(E.jsx)("td",{children:Object(E.jsxs)("div",{className:"row",children:[Object(E.jsx)("div",{className:"col s7",children:Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"tracking-".concat(t),type:"text",value:d.tracking[t],onChange:function(e){var n=d.tracking;n[t]=e.target.value,l(Object($.a)(Object($.a)({},d),{},{tracking:n}))}}),Object(E.jsx)("label",{htmlFor:"tracking-".concat(t),children:(null===c||void 0===c?void 0:c.tracking_num)?Object(E.jsx)(E.Fragment,{children:c.tracking_num}):Object(E.jsx)(E.Fragment,{children:"NONE"})})]})})}),Object(E.jsx)("div",{className:"col s4 offset-s1",style:{marginTop:"25px"},children:Object(E.jsx)("button",{className:"btn black",onClick:Object(w.a)(k.a.mark((function e(){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.tracking[t]){e.next=7;break}return e.next=3,s({variables:{order_id:c.order_id,new_tracking_num:d.tracking[t]}});case 3:(n=e.sent)&&(null===(a=n.data)||void 0===a?void 0:a.editTracking)?window.location.reload():(M.toast({html:"Failed"}),M.toast({html:"Contact me on discord"})),e.next=8;break;case 7:console.log("undefined");case 8:case"end":return e.stop()}}),e)}))),children:"Submit"})})]})}),Object(E.jsx)("td",{children:null===c||void 0===c?void 0:c.products.map((function(e,t){return Object(E.jsxs)("div",{className:"row",children:[c.products[t].name," x"," ",c.products[t].quantityOrdered]})}))}),Object(E.jsxs)("td",{children:["$",Number(c.order_total/100).toFixed(2)]}),Object(E.jsx)("td",{children:Object(E.jsx)("a",{href:"#/order-details:".concat(c.order_id),children:"See Details"})})]})}))})]})}))},ge=(n(136),function(){var e=Object(A.g)();e.state&&e.state.reload&&window.location.reload();var t,n=z.useQuery(ne,t),c=n.data,a=n.loading,r=n.error;return a?Object(E.jsx)(E.Fragment,{children:"...loading"}):!c||r?(console.log("error :>> ",r),M.toast({html:"".concat(r)}),Object(E.jsx)("div",{className:"centered",children:Object(E.jsx)("h1",{className:"red-text",children:"An Error has occurred"})})):(console.log("data",c),Object(E.jsxs)("div",{className:"container",style:{marginTop:"50px"},children:[Object(E.jsx)("nav",{className:"z-depth-0 black-text ",style:{backgroundColor:"transparent"},children:Object(E.jsxs)("div",{className:"nav-wrapper",children:[Object(E.jsx)("h5",{className:"left",style:{marginBottom:"48px",marginLeft:"16px",marginRight:"16px",fontWeight:"bold",fontSize:"26px",color:"#14161a"},children:"Products"}),Object(E.jsx)("ul",{className:"right",children:Object(E.jsx)("li",{children:Object(E.jsx)("a",{href:"#/add-products",children:Object(E.jsx)("i",{className:"material-icons black-text",children:"add"})})})})]})}),Object(E.jsx)("div",{className:"products-grid",children:null===c||void 0===c?void 0:c.getProducts.map((function(e,t){var n=c.getProducts[t];return Object(E.jsxs)("div",{className:"card",style:{margin:"0px 16px 32px 16px"},children:[Object(E.jsxs)("div",{className:"card-image",children:[n.images[0].img_url?Object(E.jsx)("img",{src:n.images[0].img_url,style:{maxHeight:"280px"}}):Object(E.jsx)("img",{src:"https://materializecss.com/images/sample-1.jpg"}),Object(E.jsx)("a",{href:"#/edit-product:".concat(n.product_id),className:"btn-floating btn-large halfway-fab large blue-grey darken-4",children:Object(E.jsx)("i",{className:" large material-icons",children:"edit"})})]}),Object(E.jsxs)("div",{className:"card-content",children:[Object(E.jsx)("span",{className:"card-title",children:n.name}),Object(E.jsxs)("p",{className:"product-price",children:["$",Number(n.price/100).toFixed(2)]}),Object(E.jsx)("p",{children:n.desc})]})]},t)}))})]}))}),ve=function(){return Object(E.jsxs)(A.d,{children:[Object(E.jsx)(T,{exact:!0,path:"/orders",component:xe}),Object(E.jsx)(T,{exact:!0,path:"/products",component:ge}),Object(E.jsx)(T,{exact:!0,path:"/add-products",component:oe}),Object(E.jsx)(T,{exact:!0,path:"/edit-product:id",component:pe}),Object(E.jsx)(T,{exact:!0,path:"/coupons",component:be}),Object(E.jsx)(T,{exact:!0,path:"/announcements",component:je}),Object(E.jsx)(T,{exact:!0,path:"/maintenance",component:he}),Object(E.jsx)(T,{exact:!0,path:"/order-details:id",component:Oe}),Object(E.jsx)(A.b,{render:function(){return Object(E.jsx)(A.a,{to:"/products"})}})]})},fe=function(){var e,t=Object(_.useState)(""),n=Object(y.a)(t,2),c=n[0],a=n[1],r=Object(_.useState)(""),s=Object(y.a)(r,2),i=s[0],o=s[1],d=z.useMutation(J,e),l=Object(y.a)(d,1)[0],u=function(){var e=Object(w.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({variables:{username:c,password:i}});case 3:t=e.sent,console.log("res :>> ",t),t&&t.data&&(n=t.data.apiLogin.accessToken,F(n),localStorage.setItem("urd",t.data.apiLogin.refreshToken),window.location.reload()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),ue.a.toast({html:"Failed Login"}),ue.a.toast({html:"server is likely down"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(E.jsx)("div",{className:"login-wrapper",style:{backgroundColor:"#000",minHeight:"100vh",minWidth:"100vw"},children:Object(E.jsx)("div",{className:"container",children:Object(E.jsx)("div",{className:"row",children:Object(E.jsx)("div",{className:"col s12",children:Object(E.jsx)("div",{className:"card",children:Object(E.jsx)("div",{className:"card-content",children:Object(E.jsxs)("div",{children:[Object(E.jsx)("h5",{className:"center-align",children:"Login"}),Object(E.jsxs)("form",{children:[Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"username",type:"text",value:c,onChange:function(e){return a(e.target.value)}}),Object(E.jsx)("label",{htmlFor:"username",children:"Username"})]})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"input-field",children:[Object(E.jsx)("input",{id:"password",type:"password",value:i,onChange:function(e){return o(e.target.value)}}),Object(E.jsx)("label",{htmlFor:"password",children:"Password"})]})}),Object(E.jsx)("div",{className:"row",style:{display:"flex",justifyContent:"center"},children:Object(E.jsx)("button",{className:"btn",style:{minWidth:"150px",backgroundColor:"#4285f4",color:"#fff"},onClick:function(){return u()},children:"Login"})})]})]})})})})})})})},Ne=n(44),ke=function(){return Object(E.jsx)(Ne.a,{children:Object(E.jsx)("div",{className:"App",children:I()?Object(E.jsx)(B,{children:Object(E.jsx)(ve,{})}):Object(E.jsxs)(A.d,{children:[Object(E.jsx)(A.b,{exact:!0,path:"/login",component:fe}),Object(E.jsx)(A.b,{render:function(){return Object(E.jsx)(A.a,{to:"/login"})}})]})})})},we="https://shrouded-plains-70355.herokuapp.com/",ye=function(){var e=Object(_.useState)(!0),t=Object(y.a)(e,2),n=t[0],c=t[1];return Object(_.useEffect)((function(){var e=localStorage.getItem("urd");fetch("".concat(we,"/api_refresh_token"),{method:"POST",credentials:"include",headers:{refreshToken:e}}).then(function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,a=n.accessToken,r=n.refreshToken,F(a),localStorage.setItem("urd",r),c(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),n?Object(E.jsx)(E.Fragment,{children:"loading.."}):Object(E.jsx)(ke,{})},_e=n(96),Ce=n(100),Fe=n(24),Se=n(20),$e=n(102),Pe=n(99),Ae=n(101),qe=new Ce.a({}),Ee=new Fe.a((function(e,t){return new Se.a((function(n){var c;return Promise.resolve(e).then((function(e){var t=S();e.setContext({headers:{authorization:t?"bearer ".concat(t):""}})})).then((function(){c=t(e).subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})})).catch(n.error.bind(n)),function(){c&&c.unsubscribe()}}))})),Me=new _e.a({link:Fe.a.from([new Ae.a({accessTokenField:"accessToken",isTokenValidOrUndefined:function(){var e=S();if(!e)return!0;try{var t=Object(q.a)(e).exp;return!(Date.now()>=1e3*t)}catch(n){return!1}},fetchAccessToken:function(){return fetch("".concat(we,"/refresh_token"),{method:"POST",credentials:"include"})},handleFetch:function(e){F(e)},handleError:function(e){console.warn("Your refresh token is invalid, Try to relogin"),console.error(e)}}),Object(Pe.a)((function(e){var t=e.graphQLErrors,n=e.networkError;console.log(t),console.log(n)})),Ee,new $e.a({uri:"".concat(we,"/graphql"),credentials:"include"})]),cache:qe});f.a.render(Object(E.jsx)(z.ApolloProvider,{client:Me,children:Object(E.jsx)(ye,{})}),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.042356ee.chunk.js.map